<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SVD · Impute.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Impute.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Walkthroughs</span><ul><li><a class="toctext" href="../spatiotemporal/">Spatiotemporal</a></li><li class="current"><a class="toctext" href>SVD</a><ul class="internal"></ul></li></ul></li><li><span class="toctext">API</span><ul><li><a class="toctext" href="../../api/impute/">Impute</a></li><li><a class="toctext" href="../../api/validators/">Validators</a></li><li><a class="toctext" href="../../api/filter/">Filter</a></li><li><a class="toctext" href="../../api/imputors/">Imputors</a></li><li><a class="toctext" href="../../api/chain/">Chain</a></li><li><a class="toctext" href="../../api/functional/">Functional</a></li><li><a class="toctext" href="../../api/utils/">Utilities</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Walkthroughs</li><li><a href>SVD</a></li></ul><a class="edit-page" href="https://github.com/invenia/Impute.jl/blob/master/docs/src/walkthroughs/svd.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>SVD</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="SVD-Imputation-1" href="#SVD-Imputation-1">SVD Imputation</a></h1><p>Often matrices and n-dimensional arrays with missing values can be imputed via a low rank approximation. Impute.jl provides one such method using a single value decomposition. The general idea is to:</p><ol><li>Fill the missing values with some rough approximates (e.g., <code>mean</code>, <code>median</code>, <code>rand</code>)</li><li>Reconstruct this &quot;completed&quot; matrix with a low rank SVD approximation (i.e., <code>k</code> largest singular values)</li><li>Replace our initial estimates with the reconstructed values</li><li>Repeat steps 1-3 until convergence (update difference is below a tolerance)</li></ol><p>To demonstrate how this is useful lets load a reduced MNIST dataset. We&#39;ll want both the completed dataset and another dataset with 35% of the values set to <code>-1.0</code> (indicating missingness).</p><p>TODO: Update example with more a realistic dataset like some microarray data</p><pre><code class="language-julia-repl">julia&gt; using Distances, Impute, Plots, Statistics

julia&gt; mnist = Impute.dataset(&quot;test/matrix/mnist&quot;);

julia&gt; completed, incomplete = mnist[0.0], mnist[0.25];</code></pre><p>Alright, before we get started lets have a look at what our incomplete data looks like:</p><pre><code class="language-julia-repl">julia&gt; heatmap(incomplete; color=:greys);

/home/travis/.julia/packages/GR/oiZD3/src/../deps/gr/bin/gksqt: error while loading shared libraries: libQt5Widgets.so.5: cannot open shared object file: No such file or directory
connect: Connection refused
GKS: can&#39;t connect to GKS socket application
Did you start &#39;gksqt&#39;?

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../mnist-incomplete-plot.svg" alt/></p><p>Okay, so as we&#39;d expect there&#39;s a reasonable bit of structure we can exploit. So how does the svd method compare against other common, yet simpler, methods?</p><pre><code class="language-julia-repl">julia&gt; data = Impute.declaremissings(incomplete; values=-1.0)
196×1000 Array{Union{Missing, Float64},2}:
 0.0       0.0       0.0       0.0       …   missing   missing  0.0
 0.0       0.0       0.0       0.0          0.0       0.0       0.0
  missing   missing  0.0        missing     0.0       0.0        missing
 0.0       0.0       0.0        missing     0.0        missing  0.0
  missing  0.0       0.0       0.0          0.0        missing   missing
  missing   missing   missing  0.0       …  0.0       0.0       0.0
 0.0        missing  0.0       0.0          0.0       0.0       0.0
  missing  0.0       0.0       0.0           missing  0.0       0.0
 0.0        missing  0.0       0.0          0.0       0.0       0.0
 0.0        missing  0.0       0.0           missing  0.0       0.0
 ⋮                                       ⋱
  missing  0.0        missing   missing      missing  0.0        missing
 0.0       0.0       0.0       0.0          0.0       0.0       0.0
 0.0       0.0       0.0       0.0          0.0       0.0       0.0
 0.0        missing  0.0        missing  …   missing  0.0        missing
 0.0       0.0       0.0       0.0          0.0       0.0       0.0
  missing  0.0       0.0       0.0           missing  0.0       0.0
 0.0       0.0       0.0       0.0          0.0       0.0       0.0
  missing  0.0       0.0       0.0           missing  0.0       0.0
 0.0       0.0       0.0       0.0       …  0.0        missing   missing

julia&gt; # NOTE: SVD performance is almost identical regardless of the `init` setting.
       imputors = [
           &quot;0.5&quot; =&gt; Impute.Replace(; values=0.5),
           &quot;mean&quot; =&gt; Impute.Substitute(; robust=false),
           &quot;median&quot; =&gt; Impute.Substitute(),
           &quot;svd&quot; =&gt; Impute.SVD(; tol=1e-2),
       ]
4-element Array{Pair{String,Impute.Imputor},1}:
    &quot;0.5&quot; =&gt; Impute.Replace((0.5,))
   &quot;mean&quot; =&gt; Impute.Substitute(Impute.var&quot;#25#26&quot;{Bool,Nothing}(false, nothing))
 &quot;median&quot; =&gt; Impute.Substitute(Impute.var&quot;#25#26&quot;{Bool,Nothing}(true, nothing))
    &quot;svd&quot; =&gt; Impute.SVD(Impute.Substitute(Impute.var&quot;#25#26&quot;{Bool,Nothing}(true, nothing)), nothing, 0.01, 100, nothing, true)

julia&gt; results = map(last.(imputors)) do imp
           r = Impute.impute(data, imp; dims=:)
           return nrmsd(completed, r)
       end
4-element Array{Float64,1}:
 0.2182014647100205
 0.13187323162381387
 0.1455168592338636
 0.07767838784377504

julia&gt; bar(first.(imputors), results);

/home/travis/.julia/packages/GR/oiZD3/src/../deps/gr/bin/gksqt: error while loading shared libraries: libQt5Widgets.so.5: cannot open shared object file: No such file or directory
connect: Connection refused
GKS: can&#39;t connect to GKS socket application
Did you start &#39;gksqt&#39;?

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../svd-results-plot.svg" alt/></p><footer><hr/><a class="previous" href="../spatiotemporal/"><span class="direction">Previous</span><span class="title">Spatiotemporal</span></a><a class="next" href="../../api/impute/"><span class="direction">Next</span><span class="title">Impute</span></a></footer></article></body></html>
